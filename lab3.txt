-- DROP SCHEMA public;

CREATE SCHEMA public AUTHORIZATION postgres;

COMMENT ON SCHEMA public IS 'standard public schema';

-- DROP SEQUENCE public.charity_charityid_seq;

CREATE SEQUENCE public.charity_charityid_seq
	INCREMENT BY 1
	MINVALUE 1
	MAXVALUE 2147483647
	START 1
	CACHE 1
	NO CYCLE;

-- Permissions

ALTER SEQUENCE public.charity_charityid_seq OWNER TO user23;
GRANT ALL ON SEQUENCE public.charity_charityid_seq TO user23;
-- public.charity definition

-- Drop table

-- DROP TABLE public.charity;

CREATE TABLE public.charity (
	charityid int4 NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	charityname varchar(100) NOT NULL,
	charitydescription varchar(2000) NULL,
	charitylogo varchar(50) NULL,
	CONSTRAINT charity_pk PRIMARY KEY (charityid)
);

-- Permissions

ALTER TABLE public.charity OWNER TO user23;
GRANT ALL ON TABLE public.charity TO user23;


-- public.country definition

-- Drop table

-- DROP TABLE public.country;

CREATE TABLE public.country (
	countrycode bpchar(3) NOT NULL,
	countryname varchar(100) NOT NULL,
	countryflag varchar(100) NOT NULL,
	CONSTRAINT country_pk PRIMARY KEY (countrycode)
);

-- Permissions

ALTER TABLE public.country OWNER TO user23;
GRANT ALL ON TABLE public.country TO user23;


-- public.eventtype definition

-- Drop table

-- DROP TABLE public.eventtype;

CREATE TABLE public.eventtype (
	eventtypeid bpchar(2) NOT NULL,
	eventtypename varchar(50) NOT NULL,
	CONSTRAINT eventtype_pk PRIMARY KEY (eventtypeid)
);

-- Permissions

ALTER TABLE public.eventtype OWNER TO user23;
GRANT ALL ON TABLE public.eventtype TO user23;


-- public.gender definition

-- Drop table

-- DROP TABLE public.gender;

CREATE TABLE public.gender (
	gender varchar(10) NOT NULL,
	genderid int4 NOT NULL,
	CONSTRAINT gender_pk PRIMARY KEY (genderid)
);

-- Permissions

ALTER TABLE public.gender OWNER TO user23;
GRANT ALL ON TABLE public.gender TO user23;


-- public.racekitoption definition

-- Drop table

-- DROP TABLE public.racekitoption;

CREATE TABLE public.racekitoption (
	racekitoptionid bpchar(1) NOT NULL,
	racekitoption varchar(80) NOT NULL,
	"cost" numeric(10, 2) NOT NULL,
	CONSTRAINT racekitoption_pk PRIMARY KEY (racekitoptionid)
);

-- Permissions

ALTER TABLE public.racekitoption OWNER TO user23;
GRANT ALL ON TABLE public.racekitoption TO user23;


-- public.registrationstatus definition

-- Drop table

-- DROP TABLE public.registrationstatus;

CREATE TABLE public.registrationstatus (
	registrationstatusid int4 NOT NULL,
	registrationstatus varchar(80) NOT NULL,
	CONSTRAINT registrationstatus_pk PRIMARY KEY (registrationstatusid)
);

-- Permissions

ALTER TABLE public.registrationstatus OWNER TO user23;
GRANT ALL ON TABLE public.registrationstatus TO user23;


-- public."role" definition

-- Drop table

-- DROP TABLE public."role";

CREATE TABLE public."role" (
	roleid bpchar(1) NOT NULL,
	rolename varchar(50) NOT NULL,
	CONSTRAINT role_pk PRIMARY KEY (roleid)
);

-- Permissions

ALTER TABLE public."role" OWNER TO user23;
GRANT ALL ON TABLE public."role" TO user23;


-- public.marathon definition

-- Drop table

-- DROP TABLE public.marathon;

CREATE TABLE public.marathon (
	marathonid int4 NOT NULL,
	marathonname varchar(80) NOT NULL,
	cityname varchar(80) NULL,
	countrycode bpchar(3) NOT NULL,
	yearheld int4 NULL,
	CONSTRAINT marathon_pk PRIMARY KEY (marathonid),
	CONSTRAINT marathon_fk FOREIGN KEY (countrycode) REFERENCES public.country(countrycode)
);

-- Permissions

ALTER TABLE public.marathon OWNER TO user23;
GRANT ALL ON TABLE public.marathon TO user23;


-- public.runner definition

-- Drop table

-- DROP TABLE public.runner;

CREATE TABLE public.runner (
	runnerid int4 NOT NULL,
	email varchar(100) NOT NULL,
	gender int4 NOT NULL,
	dateofbirth information_schema."time_stamp" NULL,
	countrycode bpchar(3) NOT NULL,
	CONSTRAINT runner_pk PRIMARY KEY (runnerid),
	CONSTRAINT runner_fk2 FOREIGN KEY (countrycode) REFERENCES public.country(countrycode)
);

-- Permissions

ALTER TABLE public.runner OWNER TO user23;
GRANT ALL ON TABLE public.runner TO user23;


-- public."user" definition

-- Drop table

-- DROP TABLE public."user";

CREATE TABLE public."user" (
	email varchar(100) NOT NULL,
	"password" varchar(100) NOT NULL,
	firstname varchar(80) NULL,
	lastname varchar(80) NULL,
	roleid bpchar(1) NOT NULL,
	CONSTRAINT user_pk PRIMARY KEY (email),
	CONSTRAINT user_fk FOREIGN KEY (roleid) REFERENCES public."role"(roleid)
);

-- Permissions

ALTER TABLE public."user" OWNER TO user23;
GRANT ALL ON TABLE public."user" TO user23;


-- public.volunteer definition

-- Drop table

-- DROP TABLE public.volunteer;

CREATE TABLE public.volunteer (
	volunteerid int4 NOT NULL,
	firstname varchar(80) NULL,
	lastname varchar(80) NULL,
	countrycode bpchar(3) NOT NULL,
	gender int4 NOT NULL,
	CONSTRAINT volunteer_pk PRIMARY KEY (volunteerid),
	CONSTRAINT volunteer_fk1 FOREIGN KEY (countrycode) REFERENCES public.country(countrycode)
);

-- Permissions

ALTER TABLE public.volunteer OWNER TO user23;
GRANT ALL ON TABLE public.volunteer TO user23;


-- public."event" definition

-- Drop table

-- DROP TABLE public."event";

CREATE TABLE public."event" (
	eventid bpchar(6) NOT NULL,
	eventname varchar(50) NOT NULL,
	eventtypeid bpchar(2) NOT NULL,
	marathonid int4 NOT NULL,
	startdatetime information_schema."time_stamp" NULL,
	"cost" numeric(10, 2) NULL,
	maxparticipants int4 NULL,
	CONSTRAINT event_pk PRIMARY KEY (eventid),
	CONSTRAINT event_fk FOREIGN KEY (marathonid) REFERENCES public.marathon(marathonid),
	CONSTRAINT event_fk1 FOREIGN KEY (eventtypeid) REFERENCES public.eventtype(eventtypeid)
);

-- Permissions

ALTER TABLE public."event" OWNER TO user23;
GRANT ALL ON TABLE public."event" TO user23;


-- public.registration definition

-- Drop table

-- DROP TABLE public.registration;

CREATE TABLE public.registration (
	registrationid int4 NOT NULL,
	runnerid int4 NOT NULL,
	registrationdatetime information_schema."time_stamp" NOT NULL,
	racekitoptionid bpchar(1) NOT NULL,
	registrationstatusid int4 NOT NULL,
	"cost" numeric(10, 2) NOT NULL,
	charityid int4 NOT NULL,
	sponsorshiptarget numeric(10, 2) NOT NULL,
	CONSTRAINT registration_pk PRIMARY KEY (registrationid),
	CONSTRAINT registration_fk FOREIGN KEY (charityid) REFERENCES public.charity(charityid),
	CONSTRAINT registration_fk1 FOREIGN KEY (racekitoptionid) REFERENCES public.racekitoption(racekitoptionid),
	CONSTRAINT registration_fk3 FOREIGN KEY (registrationstatusid) REFERENCES public.registrationstatus(registrationstatusid),
	CONSTRAINT registration_fk4 FOREIGN KEY (runnerid) REFERENCES public.runner(runnerid)
);

-- Permissions

ALTER TABLE public.registration OWNER TO user23;
GRANT ALL ON TABLE public.registration TO user23;


-- public.registrationevent definition

-- Drop table

-- DROP TABLE public.registrationevent;

CREATE TABLE public.registrationevent (
	registrationeventid int4 NOT NULL,
	registrationid int4 NOT NULL,
	eventid bpchar(6) NOT NULL,
	bignumber int4 NULL,
	racetime int4 NULL,
	CONSTRAINT registrationevent_pk PRIMARY KEY (registrationeventid),
	CONSTRAINT registrationevent_fk FOREIGN KEY (registrationid) REFERENCES public.registration(registrationid),
	CONSTRAINT registrationevent_fk1 FOREIGN KEY (eventid) REFERENCES public."event"(eventid)
);

-- Permissions

ALTER TABLE public.registrationevent OWNER TO user23;
GRANT ALL ON TABLE public.registrationevent TO user23;


-- public.sponsorship definition

-- Drop table

-- DROP TABLE public.sponsorship;

CREATE TABLE public.sponsorship (
	sponsorshipid int4 NOT NULL,
	sponsorname varchar(150) NOT NULL,
	registrationid int4 NOT NULL,
	amount numeric(10, 2) NOT NULL,
	CONSTRAINT sponsorship_pk PRIMARY KEY (sponsorshipid),
	CONSTRAINT sponsorship_fk FOREIGN KEY (registrationid) REFERENCES public.registration(registrationid)
);

-- Permissions

ALTER TABLE public.sponsorship OWNER TO user23;
GRANT ALL ON TABLE public.sponsorship TO user23;




-- Permissions;
